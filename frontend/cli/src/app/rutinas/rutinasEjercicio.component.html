<div *ngIf="!rutinaTerminada; else rutinaCompletada" class="exercise-container">
    <!-- Mostrar el día actual solo si no está finalizado -->
    <div *ngIf="diaActual && !diaFinalizado">
        <h2>Día: {{ diaActual.nombre }}</h2>
        <p>{{ diaActual.descripcion }}</p>
        <p>Tipo: {{ diaActual.tipo === 'trabajo' ? 'Día de Trabajo' : 'Día de Descanso' }}</p>
    </div>

    <!-- Mostrar los ejercicios del día si es un día de trabajo -->
    <div *ngIf="diaActual?.tipo === 'trabajo' && !diaFinalizado; else diaFinalizadoTemplate">
        <div *ngIf="ejercicioActual; else noEjercicios">
            <!-- Mostrar el ejercicio actual si no está en descanso -->
            <div *ngIf="!enDescanso; else descansoTemplate">
                <h3>{{ ejercicioActual.nombre }}</h3>
                <p>{{ ejercicioActual.descripcion }}</p>

                <!-- Mostrar campos de repeticiones y series si el ejercicio es de tipo 'series' -->
                <div *ngIf="ejercicioActual.tipo === 'series'">
                    <p>Repeticiones: {{ ejercicioActual.repeticiones }}</p>
                    <p>Series: {{ ejercicioActual.series }}</p>
                </div>

                <!-- Mostrar campo de tiempo si el ejercicio es de tipo 'resistencia' -->
                <div *ngIf="ejercicioActual.tipo === 'resistencia'">
                    <p>Tiempo: {{ ejercicioActual.tiempo }}</p>
                </div>

                <!-- Mostrar la imagen del ejercicio -->
                <div class="exercise-image-container">
                    <img *ngIf="ejercicioActual.imagen" [src]="ejercicioActual.imagen" alt="Imagen del ejercicio"
                        class="exercise-image">
                </div>

                <!-- Condición para mostrar "Terminado" o "Finalizar día" -->
                <button class="btn" (click)="terminarEjercicio()">
                    {{ esUltimoEjercicio() ? 'Finalizar día' : 'Terminado' }}
                </button>
            </div>

            <!-- Template para el descanso entre ejercicios -->
            <ng-template #descansoTemplate>
                <div class="rest-container">
                    <h3>Descanso</h3>
                    <p>Tómate un descanso de {{ tiempoDescanso }} segundos.</p>
                    <button class="btn" (click)="terminarEjercicio()">Terminado</button>
                </div>
            </ng-template>
        </div>

        <!-- Mensaje si no hay ejercicios disponibles -->
        <ng-template #noEjercicios>
            <p>No hay ejercicios disponibles para este día.</p>
        </ng-template>
    </div>

    <!-- Mensaje y botón para día finalizado -->
    <ng-template #diaFinalizadoTemplate>
        <div *ngIf="diaFinalizado && !rutinaTerminada">
            <h3>¡Día Finalizado!</h3>
            <p>Vuelve mañana o continúa con el siguiente día.</p>
            <button class="btn" (click)="continuarConSiguienteDia()">Pasar al siguiente día</button>
        </div>
    </ng-template>

    <!-- Mensaje si es un día de descanso -->
    <div *ngIf="diaActual?.tipo === 'descanso' && !diaFinalizado">
        <h3>Este es un día de descanso. ¡Relájate!</h3>
        <button class="btn" (click)="terminarEjercicio()">Pasar al siguiente día</button>
    </div>
</div>

<!-- Mensaje si no hay días disponibles -->
<ng-template #noDias>
    <p>No hay días disponibles para esta rutina.</p>
</ng-template>

<!-- Mensaje de rutina completada -->
<ng-template #rutinaCompletada>
    <h3>¡Rutina completada!</h3>
    <p>Has terminado todos los días y ejercicios. ¡Felicidades!</p>
</ng-template>
